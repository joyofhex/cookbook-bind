# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.

# <% if !@zones.empty? %><%= @zones[0].type %> zones<% else %>empty file<% end -%>
<% @zones.each do |zone| -%>
<% case zone.type
   when 'master' %>
zone "<%= zone.name %>" IN {
  type master;
  file "primary/db.<%= zone.name %>";
  <% zone.options.each do |option| -%>
  <%= option %>;
  <% end -%>
};

<% when 'slave' %>
zone "<%= zone.name %>" IN {
  type slave;
  file "secondary/db.<%= zone.name %>";
  masters { <%= zone.primaries.map { |primary| "#{primary};" }.join(' ') %> };
  <% zone.options.each do |option| -%>
  <%= option %>;
  <% end -%>
};

<% when 'forward' %>
zone "<%= zone.name %>" IN {
  type forward;
  forwarders { <%= zone.forwarders.map { |forwarder| "#{forwarder};" }.join(' ') %> };
  forward <%= zone.forward %>;
};

  <% end -%>
<% end -%>
